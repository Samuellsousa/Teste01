name: CI-CD

on:
    push:
      branches: [ "master" ]

jobs:
  check-bats-version:
    runs-on: ubuntu-latest
    
    strategy:
      matrix:
        node-version: [12.x, 14.x, 16.x, 18.x]
    
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
            node-version: ${{ matrix.node-version }}
            cache: 'npm'
          
          - run: npm install -g bats
          - run: bats -v
          - run: npm ci
          - name: Build    
            run: npm run build --if-present

          - name: Run tests
            run: npm run test

          - name: Lint
            run: npx eslint src/**/*.ts

          - name: Run ts-prune  
            run: npm run find-deadcode          

            
              



   
        
